const digit = {
  "0": ["ðŸ¢", "ðŸ¶", "ðŸŽ", "ðŸ˜", "ï¼", "â“ª", "â“¿", "ðŸ„", "ðŸ„€", "â°", "â‚€"],
  "1": ["ðŸ£", "ðŸ·", "ðŸ", "ðŸ™", "ï¼‘", "â‘ ", "â¶", "ðŸ„‚", "â’ˆ", "Â¹", "â‚"],
  "2": ["ðŸ¤", "ðŸ¸", "ðŸ", "ðŸš", "ï¼’", "â‘¡", "â·", "ðŸ„ƒ", "â’‰", "Â²", "â‚‚"],
  "3": ["ðŸ¥", "ðŸ¹", "ðŸ‘", "ðŸ›", "ï¼“", "â‘¢", "â¸", "ðŸ„„", "â’Š", "Â³", "â‚ƒ"],
  "4": ["ðŸ¦", "ðŸº", "ðŸ’", "ðŸœ", "ï¼”", "â‘£", "â¹", "ðŸ„…", "â’‹", "â´", "â‚„"],
  "5": ["ðŸ§", "ðŸ»", "ðŸ“", "ðŸ", "ï¼•", "â‘¤", "âº", "ðŸ„†", "â’Œ", "âµ", "â‚…"],
  "6": ["ðŸ¨", "ðŸ¼", "ðŸ”", "ðŸž", "ï¼–", "â‘¥", "â»", "ðŸ„‡", "â’", "â¶", "â‚†"],
  "7": ["ðŸ©", "ðŸ½", "ðŸ•", "ðŸŸ", "ï¼—", "â‘¦", "â¼", "ðŸ„ˆ", "â’Ž", "â·", "â‚‡"],
  "8": ["ðŸª", "ðŸ¾", "ðŸ–", "ðŸ ", "ï¼˜", "â‘§", "â½", "ðŸ„‰", "â’", "â¸", "â‚ˆ"],
  "9": ["ðŸ«", "ðŸ¿", "ðŸ—", "ðŸ¡", "ï¼™", "â‘¨", "â¾", "ðŸ„Š", "â’", "â¹", "â‚‰"]
};

const letter = {
  a: ["ð–º", "ðšŠ", "ðš", "ð•’", "ï½", "â“", "ðŸ…", "ð“ª", "ð”ž", "ð–†", "ð™–", "ð—®", "ð’‚", "á´€", "ðŸ…°", "ðŸ„°"],
  b: ["ð–»", "ðš‹", "ð›", "ð•“", "ï½‚", "â“‘", "ðŸ…‘", "ð“«", "ð”Ÿ", "ð–‡", "ð™—", "ð—¯", "ð’ƒ", "Ê™", "ðŸ…±", "ðŸ„±"],
  c: ["ð–¼", "ðšŒ", "ðœ", "ð•”", "ï½ƒ", "â“’", "ðŸ…’", "ð“¬", "ð” ", "ð–ˆ", "ð™˜", "ð—°", "ð’„", "á´„", "ðŸ…²", "ðŸ„²"],
  d: ["ð–½", "ðš", "ð", "ð••", "ï½„", "â““", "ðŸ…“", "ð“­", "ð”¡", "ð–‰", "ð™™", "ð—±", "ð’…", "á´…", "ðŸ…³", "ðŸ„³"],
  e: ["ð–¾", "ðšŽ", "ðž", "ð•–", "ï½…", "â“”", "ðŸ…”", "ð“®", "ð”¢", "ð–Š", "ð™š", "ð—²", "ð’†", "á´‡", "ðŸ…´", "ðŸ„´"],
  f: ["ð–¿", "ðš", "ðŸ", "ð•—", "ï½†", "â“•", "ðŸ…•", "ð“¯", "ð”£", "ð–‹", "ð™›", "ð—³", "ð’‡", "êœ°", "ðŸ…µ", "ðŸ„µ"],
  g: ["ð—€", "ðš", "ð ", "ð•˜", "ï½‡", "â“–", "ðŸ…–", "ð“°", "ð”¤", "ð–Œ", "ð™œ", "ð—´", "ð’ˆ", "É¢", "ðŸ…¶", "ðŸ„¶"],
  h: ["ð—", "ðš‘", "ð¡", "ð•™", "ï½ˆ", "â“—", "ðŸ…—", "ð“±", "ð”¥", "ð–", "ð™", "ð—µ", "ð’‰", "Êœ", "ðŸ…·", "ðŸ„·"],
  i: ["ð—‚", "ðš’", "ð¢", "ð•š", "ï½‰", "â“˜", "ðŸ…˜", "ð“²", "ð”¦", "ð–Ž", "ð™ž", "ð—¶", "ð’Š", "Éª", "ðŸ…¸", "ðŸ„¸"],
  j: ["ð—ƒ", "ðš“", "ð£", "ð•›", "ï½Š", "â“™", "ðŸ…™", "ð“³", "ð”§", "ð–", "ð™Ÿ", "ð—·", "ð’‹", "á´Š", "ðŸ…¹", "ðŸ„¹"],
  k: ["ð—„", "ðš”", "ð¤", "ð•œ", "ï½‹", "â“š", "ðŸ…š", "ð“´", "ð”¨", "ð–", "ð™ ", "ð—¸", "ð’Œ", "á´‹", "ðŸ…º", "ðŸ„º"],
  l: ["ð—…", "ðš•", "ð¥", "ð•", "ï½Œ", "â“›", "ðŸ…›", "ð“µ", "ð”©", "ð–‘", "ð™¡", "ð—¹", "ð’", "ÊŸ", "ðŸ…»", "ðŸ„»"],
  m: ["ð—†", "ðš–", "ð¦", "ð•ž", "ï½", "â“œ", "ðŸ…œ", "ð“¶", "ð”ª", "ð–’", "ð™¢", "ð—º", "ð’Ž", "á´", "ðŸ…¼", "ðŸ„¼"],
  n: ["ð—‡", "ðš—", "ð§", "ð•Ÿ", "ï½Ž", "â“", "ðŸ…", "ð“·", "ð”«", "ð–“", "ð™£", "ð—»", "ð’", "É´", "ðŸ…½", "ðŸ„½"],
  o: ["ð—ˆ", "ðš˜", "ð¨", "ð• ", "ï½", "â“ž", "ðŸ…ž", "ð“¸", "ð”¬", "ð–”", "ð™¤", "ð—¼", "ð’", "á´", "ðŸ…¾", "ðŸ„¾"],
  p: ["ð—‰", "ðš™", "ð©", "ð•¡", "ï½", "â“Ÿ", "ðŸ…Ÿ", "ð“¹", "ð”­", "ð–•", "ð™¥", "ð—½", "ð’‘", "á´˜", "ðŸ…¿", "ðŸ„¿"],
  q: ["ð—Š", "ðšš", "ðª", "ð•¢", "ï½‘", "â“ ", "ðŸ… ", "ð“º", "ð”®", "ð––", "ð™¦", "ð—¾", "ð’’", "Ç«", "ðŸ†€", "ðŸ…€"],
  r: ["ð—‹", "ðš›", "ð«", "ð•£", "ï½’", "â“¡", "ðŸ…¡", "ð“»", "ð”¯", "ð–—", "ð™§", "ð—¿", "ð’“", "Ê€", "ðŸ†", "ðŸ…"],
  s: ["ð—Œ", "ðšœ", "ð¬", "ð•¤", "ï½“", "â“¢", "ðŸ…¢", "ð“¼", "ð”°", "ð–˜", "ð™¨", "ð˜€", "ð’”", "s", "ðŸ†‚", "ðŸ…‚"],
  t: ["ð—", "ðš", "ð­", "ð•¥", "ï½”", "â“£", "ðŸ…£", "ð“½", "ð”±", "ð–™", "ð™©", "ð˜", "ð’•", "á´›", "ðŸ†ƒ", "ðŸ…ƒ"],
  u: ["ð—Ž", "ðšž", "ð®", "ð•¦", "ï½•", "â“¤", "ðŸ…¤", "ð“¾", "ð”²", "ð–š", "ð™ª", "ð˜‚", "ð’–", "á´œ", "ðŸ†„", "ðŸ…„"],
  v: ["ð—", "ðšŸ", "ð¯", "ð•§", "ï½–", "â“¥", "ðŸ…¥", "ð“¿", "ð”³", "ð–›", "ð™«", "ð˜ƒ", "ð’—", "á´ ", "ðŸ†…", "ðŸ……"],
  w: ["ð—", "ðš ", "ð°", "ð•¨", "ï½—", "â“¦", "ðŸ…¦", "ð”€", "ð”´", "ð–œ", "ð™¬", "ð˜„", "ð’˜", "á´¡", "ðŸ††", "ðŸ…†"],
  x: ["ð—‘", "ðš¡", "ð±", "ð•©", "ï½˜", "â“§", "ðŸ…§", "ð”", "ð”µ", "ð–", "ð™­", "ð˜…", "ð’™", "x", "ðŸ†‡", "ðŸ…‡"],
  y: ["ð—’", "ðš¢", "ð²", "ð•ª", "ï½™", "â“¨", "ðŸ…¨", "ð”‚", "ð”¶", "ð–ž", "ð™®", "ð˜†", "ð’š", "Ê", "ðŸ†ˆ", "ðŸ…ˆ"],
  z: ["ð—“", "ðš£", "ð³", "ð•«", "ï½š", "â“©", "ðŸ…©", "ð”ƒ", "ð”·", "ð–Ÿ", "ð™¯", "ð˜‡", "ð’›", "á´¢", "ðŸ†‰", "ðŸ…‰"],
  A: ["ð– ", "ð™°", "ð€", "ð”¸", "ï¼¡", "â’¶", "ðŸ…", "ð“", "ð”„", "ð•¬", "ð˜¼", "ð—”", "ð‘¨", "A", "ðŸ…°", "ðŸ„°"],
  B: ["ð–¡", "ð™±", "ð", "ð”¹", "ï¼¢", "â’·", "ðŸ…‘", "ð“‘", "ð”…", "ð•­", "ð˜½", "ð—•", "ð‘©", "B", "ðŸ…±", "ðŸ„±"],
  C: ["ð–¢", "ð™²", "ð‚", "â„‚", "ï¼£", "â’¸", "ðŸ…’", "ð“’", "â„­", "ð•®", "ð˜¾", "ð—–", "ð‘ª", "C", "ðŸ…²", "ðŸ„²"],
  D: ["ð–£", "ð™³", "ðƒ", "ð”»", "ï¼¤", "â’¹", "ðŸ…“", "ð““", "ð”‡", "ð•¯", "ð˜¿", "ð——", "ð‘«", "D", "ðŸ…³", "ðŸ„³"],
  E: ["ð–¤", "ð™´", "ð„", "ð”¼", "ï¼¥", "â’º", "ðŸ…”", "ð“”", "ð”ˆ", "ð•°", "ð™€", "ð—˜", "ð‘¬", "E", "ðŸ…´", "ðŸ„´"],
  F: ["ð–¥", "ð™µ", "ð…", "ð”½", "ï¼¦", "â’»", "ðŸ…•", "ð“•", "ð”‰", "ð•±", "ð™", "ð—™", "ð‘­", "F", "ðŸ…µ", "ðŸ„µ"],
  G: ["ð–¦", "ð™¶", "ð†", "ð”¾", "ï¼§", "â’¼", "ðŸ…–", "ð“–", "ð”Š", "ð•²", "ð™‚", "ð—š", "ð‘®", "G", "ðŸ…¶", "ðŸ„¶"],
  H: ["ð–§", "ð™·", "ð‡", "â„", "ï¼¨", "â’½", "ðŸ…—", "ð“—", "â„Œ", "ð•³", "ð™ƒ", "ð—›", "ð‘¯", "H", "ðŸ…·", "ðŸ„·"],
  I: ["ð–¨", "ð™¸", "ðˆ", "ð•€", "ï¼©", "â’¾", "ðŸ…˜", "ð“˜", "â„‘", "ð•´", "ð™„", "ð—œ", "ð‘°", "I", "ðŸ…¸", "ðŸ„¸"],
  J: ["ð–©", "ð™¹", "ð‰", "ð•", "ï¼ª", "â’¿", "ðŸ…™", "ð“™", "ð”", "ð•µ", "ð™…", "ð—", "ð‘±", "J", "ðŸ…¹", "ðŸ„¹"],
  K: ["ð–ª", "ð™º", "ðŠ", "ð•‚", "ï¼«", "â“€", "ðŸ…š", "ð“š", "ð”Ž", "ð•¶", "ð™†", "ð—ž", "ð‘²", "K", "ðŸ…º", "ðŸ„º"],
  L: ["ð–«", "ð™»", "ð‹", "ð•ƒ", "ï¼¬", "â“", "ðŸ…›", "ð“›", "ð”", "ð•·", "ð™‡", "ð—Ÿ", "ð‘³", "L", "ðŸ…»", "ðŸ„»"],
  M: ["ð–¬", "ð™¼", "ðŒ", "ð•„", "ï¼­", "â“‚", "ðŸ…œ", "ð“œ", "ð”", "ð•¸", "ð™ˆ", "ð— ", "ð‘´", "M", "ðŸ…¼", "ðŸ„¼"],
  N: ["ð–­", "ð™½", "ð", "â„•", "ï¼®", "â“ƒ", "ðŸ…", "ð“", "ð”‘", "ð•¹", "ð™‰", "ð—¡", "ð‘µ", "N", "ðŸ…½", "ðŸ„½"],
  O: ["ð–®", "ð™¾", "ðŽ", "ð•†", "ï¼¯", "â“„", "ðŸ…ž", "ð“ž", "ð”’", "ð•º", "ð™Š", "ð—¢", "ð‘¶", "O", "ðŸ…¾", "ðŸ„¾"],
  P: ["ð–¯", "ð™¿", "ð", "â„™", "ï¼°", "â“…", "ðŸ…Ÿ", "ð“Ÿ", "ð”“", "ð•»", "ð™‹", "ð—£", "ð‘·", "P", "ðŸ…¿", "ðŸ„¿"],
  Q: ["ð–°", "ðš€", "ð", "â„š", "ï¼±", "â“†", "ðŸ… ", "ð“ ", "ð””", "ð•¼", "ð™Œ", "ð—¤", "ð‘¸", "Q", "ðŸ†€", "ðŸ…€"],
  R: ["ð–±", "ðš", "ð‘", "â„", "ï¼²", "â“‡", "ðŸ…¡", "ð“¡", "â„œ", "ð•½", "ð™", "ð—¥", "ð‘¹", "R", "ðŸ†", "ðŸ…"],
  S: ["ð–²", "ðš‚", "ð’", "ð•Š", "ï¼³", "â“ˆ", "ðŸ…¢", "ð“¢", "ð”–", "ð•¾", "ð™Ž", "ð—¦", "ð‘º", "S", "ðŸ†‚", "ðŸ…‚"],
  T: ["ð–³", "ðšƒ", "ð“", "ð•‹", "ï¼´", "â“‰", "ðŸ…£", "ð“£", "ð”—", "ð•¿", "ð™", "ð—§", "ð‘»", "T", "ðŸ†ƒ", "ðŸ…ƒ"],
  U: ["ð–´", "ðš„", "ð”", "ð•Œ", "ï¼µ", "â“Š", "ðŸ…¤", "ð“¤", "ð”˜", "ð–€", "ð™", "ð—¨", "ð‘¼", "U", "ðŸ†„", "ðŸ…„"],
  V: ["ð–µ", "ðš…", "ð•", "ð•", "ï¼¶", "â“‹", "ðŸ…¥", "ð“¥", "ð”™", "ð–", "ð™‘", "ð—©", "ð‘½", "V", "ðŸ†…", "ðŸ……"],
  W: ["ð–¶", "ðš†", "ð–", "ð•Ž", "ï¼·", "â“Œ", "ðŸ…¦", "ð“¦", "ð”š", "ð–‚", "ð™’", "ð—ª", "ð‘¾", "W", "ðŸ††", "ðŸ…†"],
  X: ["ð–·", "ðš‡", "ð—", "ð•", "ï¼¸", "â“", "ðŸ…§", "ð“§", "ð”›", "ð–ƒ", "ð™“", "ð—«", "ð‘¿", "X", "ðŸ†‡", "ðŸ…‡"],
  Y: ["ð–¸", "ðšˆ", "ð˜", "ð•", "ï¼¹", "â“Ž", "ðŸ…¨", "ð“¨", "ð”œ", "ð–„", "ð™”", "ð—¬", "ð’€", "Y", "ðŸ†ˆ", "ðŸ…ˆ"],
  Z: ["ð–¹", "ðš‰", "ð™", "â„¤", "ï¼º", "â“", "ðŸ…©", "ð“©", "â„¨", "ð–…", "ð™•", "ð—­", "ð’", "Z", "ðŸ†‰", "ðŸ…‰"]
}

exports.start = text => {
  const menu1 = [
    "ð– ð–»ð–¼",
    "ð™°ðš‹ðšŒ",
    "ð€ð›ðœ",
    "ð”¸ð•“ð•”",
    "ï¼¡ï½‚ï½ƒ",
    "â’¶â“‘â“’",
    "ðŸ…ðŸ…‘ðŸ…’",
    "ð“ð“«ð“¬",
    "ð”„ð”Ÿð” ",
    "ð•¬ð–‡ð–ˆ",
    "ð˜¼ð™—ð™˜",
    "ð—”ð—¯ð—°",
    "ð‘¨ð’ƒð’„",
    "AÊ™á´„",
    "ðŸ…°ðŸ…±ðŸ…²",
    "ðŸ„°ðŸ„±ðŸ„²"
  ];
  const menu2 = [
    "ðŸ£ðŸ¤ðŸ¥",
    "ðŸ·ðŸ¸ðŸ¹",
    "ðŸðŸðŸ‘",
    "ðŸ™ðŸšðŸ›",
    "ï¼‘ï¼’ï¼“",
    "â‘ â‘¡â‘¢",
    "â¶â·â¸",
    "ðŸ„‚ðŸ„ƒðŸ„„",
    "â’ˆâ’‰â’Š",
    "Â¹Â²Â³",
    "â‚â‚‚â‚ƒ"
  ];
  const digitMenu = x =>
    $delay(0, () => {
      $ui.menu(menu2).then(res => {
        if ('index' in res) convert(text, x, res.index);
      });
    });
  $ui.menu(["ä»…æ•°å­—", "ä»…å­—æ¯", "åŒæ—¶è½¬æ¢", "æ¢å¤æ­£å¸¸å­—ç¬¦"]).then(resp => {
    if ('index' in resp) {
      let idx = resp.index;
      if (idx == 0) digitMenu(undefined);
      else if (idx == 3) recover(text);
      else $delay(0, () => $ui.menu(menu1).then(res => {
        if ('index' in res) {
          if (idx == 2) {
            if (res.index < 7) convert(text, res.index, res.index);
            else digitMenu(res.index);
          } else convert(text, res.index);
        }
      }));
    }
  });
};

const convert = (text, Î± = undefined, Î² = undefined) => {
  let x = "";
  for (let i of text) {
    if (/[a-zA-Z]/.test(i) && Î± !== undefined) x += letter[i][Î±];
    else if (/\d/.test(i) && Î² !== undefined) x += digit[i][Î²];
    else x += i;
  }
  add2Clip(x);
};

const recover = text => {
  let x = "";
  for (let i of text) {
    let isMatched;
    for (let j in digit) {
      if (digit[j].includes(i)) {
        x += j;
        isMatched = true;
        break;
      }
    }
    if (isMatched) continue;
    for (let k in letter) {
      if (letter[k].includes(i)) {
        x += k;
        isMatched = true;
        break;
      }
    }
    if (isMatched) continue;
    else x += i;
  }
  add2Clip(x);
};

function add2Clip(result) {
  let dataManager = require("../data-manager"),
    ui = require("../ui");
  dataManager.copyAndSaveText(result);
  ui.toast({ text: "Done" });
}
